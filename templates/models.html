<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- <meta name="_csrf" content="${_csrf.token}"/>
<meta name="_csrf_header" content="${_csrf.headerName}"/> -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="keywords"
      content="NCATS, QSAR, model, smiles, sdf, structure, predictor"
    />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>NCATS Predictor</title>
    <link rel="icon" type="image/x-icon" href="predictor/image/favicon.ico" />
    <link
      type="text/css"
      rel="stylesheet"
      href="predictor/css/bootstrap.min.css"
    />
    <!--<link rel="stylesheet" type="text/css" th:href="@{/css/mdb.css}"/>-->
    <link
      rel="stylesheet"
      href="predictor/font-awesome-4.7.0/css/font-awesome.min.css"
    />

    <link
      type="text/css"
      rel="stylesheet"
      href="predictor/css/oswald/oswald-400-700-300.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="predictor/css/dataTables.bootstrap.min.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="predictor/css/bootstrap-slider.min.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="predictor/css/dataTables.fixedHeader.min.css"
    />
    <link type="text/css" rel="stylesheet" href="predictor/css/style.css" />

    <script
      type="text/javascript"
      src="predictor/js/jquery-3.0.0.min.js"
    ></script>
    <script type="text/javascript" src="predictor/js/popper.min.js"></script>
    <script type="text/javascript" src="predictor/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="predictor/js/util.js"></script>
    <script type="text/javascript" src="predictor/js/mustache.min.js"></script>
  </head>
  <!--<link type="text/css" rel="stylesheet" th:href="@{css/bootstrap-select.min.css}">
<script type="text/javascript" th:src="@{/js/bootstrap-select.min.js}"></script>-->

  <body>
    <div class="container-fluid text-white" id="purple_banner">
      <div class="container">
        <img
          class="masthead-logo"
          src="https://registries.ncats.nih.gov/wp-content/themes/default/img/masthead-hhs-logo.png"
          alt="HHS Logo Icon"
        />
        <a
          class="masthead-link hhs-link"
          href="https://www.hhs.gov/"
          target="_blank"
          ><span class="d-none d-xl-inline-block"
            >U.S. Department of Health and Human Services</span
          ><span class="d-xl-none d-inline-block">HHS</span></a
        >
        <img
          src="https://registries.ncats.nih.gov/wp-content/themes/default/img/masthead-divider.png"
          alt="NIH Logo Icon"
        />
        <img
          class="masthead-logo"
          src="https://registries.ncats.nih.gov/wp-content/themes/default/img/masthead-nih-logo.png"
        />
        <a
          class="masthead-link nih-link"
          href="https://www.nih.gov/"
          target="_blank"
          ><span class="d-none d-lg-inline-block"
            >National Institutes of Health</span
          ><span class="d-lg-none d-inline-block">NIH</span></a
        >
        <img
          src="https://registries.ncats.nih.gov/wp-content/themes/default/img/masthead-divider.png"
        />
        <img
          class="masthead-logo"
          src="https://registries.ncats.nih.gov/wp-content/themes/default/img/masthead-nih-logo.png"
          alt="NCATS Logo Icon"
        />
        <a
          class="masthead-link ncats-link"
          href="https://www.ncats.nih.gov/"
          target="_blank"
          ><span class="d-none d-md-inline-block"
            >National Center for Advancing Translational Sciences</span
          ><span class="d-md-none d-inline-block">NCATS</span></a
        >
        <img
          src="https://registries.ncats.nih.gov/wp-content/themes/default/img/masthead-divider.png"
        />
      </div>
    </div>
    <div>
      <div class="container-fluid">
        <div class="container px-0">
          <div class="row" id="brand_row">
            <div class="col-md-12">
              <div>
                <a
                  class="navbar-brand"
                  href="https://ncats.nih.gov"
                  target="_blank"
                >
                  <img id="ncats_logo" src="predictor/image/ncats.svg" />
                </a>
              </div>
              <div id="web_name">
                <a class="large-screen" href="predictor/index.html"
                  >NCATS Predictor</a
                >
                <a class="small-screen" href="predictor/index.html"></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div>
      <div id="navigation" class="container-fluid">
        <div class="container adjustable px-0">
          <nav
            class="navbar navbar-dark navbar-expand-md py-0"
            role="navigation"
          >
            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbarSupportedContent">
              <ul id="menu-main-nav" class="navbar-nav nav-justified w-100">
                <li id="navbar_intro" class="nav-item menu-item">
                  <a href="predictor/">Introduction</a>
                </li>

                <li id="navbar_structure" class="nav-item menu-item">
                  <a href="predictor/structure">Structure Prediction</a>
                </li>

                <li id="navbar_batch" class="nav-item menu-item">
                  <a href="predictor/batch">Batch Prediction</a>
                </li>

                <li id="navbar_models" class="nav-item menu-item">
                  <a href="predictor/models">Models</a>
                </li>
                <li id="navbar_resources" class="nav-item menu-item">
                  <a href="predictor/resources">Resources</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>

    <div class="container" id="models_container" style="overflow: hidden">
      <div class="row">
        <div class="col-md-12">
          Total Models Provided:
          <span id="total_model" class="badge badge-success"></span>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <label for="models_list"
              ><strong>Select model name to view details:</strong></label
            >
            <select id="models_list" class="selectpicker form-control"></select>
          </div>
          <!--
					<h4>Select model name to view details:</h4>
					<select id="models_list" class="form-control" data-live-search="true"></select> 
					-->
        </div>
      </div>

      <div class="row">
        <div class="col-md-12" id="model_info"></div>
      </div>
    </div>

    <div class="container-fluid text-center footer">
      <div class="row">
        <div class="col-md-12">
          <p>
            <a href="https://www.nih.gov/" target="_blank" class="external-link"
              >NIH</a
            >
            <span class="v-bar">|</span>
            <a
              href="https://ncats.nih.gov/"
              target="_blank"
              class="external-link"
              >NCATS</a
            >
            <span class="v-bar">|</span>
            <a
              href="https://ncats.nih.gov/privacy"
              target="_blank"
              class="external-link"
              >PRIVACY ACT</a
            >
            <span class="v-bar">|</span>
            <a
              href="https://ncats.nih.gov/accessibility"
              target="_blank"
              class="external-link"
              >ACCESSIBILITY</a
            >
            <span class="v-bar">|</span>
            <a
              href="https://ncats.nih.gov/disclaimer"
              target="_blank"
              class="external-link"
              >DISCLAIMER</a
            >
          </p>
        </div>
      </div>
      <div class="row mb-2">
        <div class="col-md-12">
          <a
            title="HHS Vulnerability Disclosure"
            href="https://www.hhs.gov/vulnerability-disclosure-policy/index.html"
            class="external-link"
            target="_blank"
            >HHS Vulnerability Disclosure</a
          >
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <p>
            If you have problems viewing PDF files, download the latest version
            of
            <a
              target="_blank"
              href="https://get.adobe.com/reader/"
              class="external-link"
              >Adobe Reader</a
            >
          </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p>
            For
            <a
              href="http://edi.nih.gov/consulting/language-access-program/about"
              target="_blank"
              title="Read the plan"
              class="external-link"
              >language access</a
            >
            assistance, contact the
            <a
              href="mailto: info@ncats.nih.gov"
              title="E - mail Public Information Officer"
              class="external-link"
              >NCATS Public Information Officer</a
            >
          </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p>
            National Center for Advancing Translational Sciences (NCATS), 6701
            Democracy Boulevard, Bethesda MD 20892-4874 &#9742; 301-594-8966
          </p>
        </div>
      </div>
    </div>
    <div>
      <script type="text/template" id="model_detail_template">
         	{{#.}}
        	    <dl class="row">
           		<dt class="col-md-2">Name:</dt><dd class="col-md-9"><i>{{name}}</i></dd>
           		<dt class="col-md-2">Prediction Type:</dt><dd class="col-md-9">{{type}}</dd>
           		<dt class="col-md-2">End Point:</dt><dd class="col-md-9">{{endPoint}}</dd>

           		<dt class="col-md-2">Group:</dt><dd class="col-md-9">{{group}}</dd>
           		<dt class="col-md-2">Title:</dt><dd class="col-md-9">{{title}}</dd>
           		<dt class="col-md-2">Num Training Set:</dt><dd class="col-md-9">{{numTraining}}</dd>

           		<dt class="col-md-2">Num Testing Set:</dt><dd class="col-md-9">{{numTesting}}</dd>
           		<dt class="col-md-2">Validation Approach:</dt><dd class="col-md-9">{{validationApproach}}</dd>
           		<dt class="col-md-2">R2:</dt><dd class="col-md-9">{{r2}}</dd>

           		<dt class="col-md-2">RMSE:</dt><dd class="col-md-9">{{rmse}}</dd>
           		<dt class="col-md-2">Balanced Accuracy:</dt><dd class="col-md-9">{{accuracy}}</dd>

           		<dt class="col-md-2">AUC:</dt><dd class="col-md-9">{{auc}}</dd>
           		<dt class="col-md-3 gap">Descriptors:</dt>
        		<dd class="col-md-12">{{descriptors}}</dd>

           		<dt class="col-md-3">Machine Learning Approach:</dt>
        		<dd class="col-md-12">{{macLearningApproach}}</dd>
           		<dt class="col-md-3 gap">Applicability domain:</dt>
        		<dd class="col-md-12">{{applicabilityDomain}}</dd>

        		<dt class="col-md-3 gap">Reference:</dt>
        		<dd class="col-md-12">
        			{{#references}}
        				{{.}}<br/>
        			{{/references}}
        		</dd>
        		<dt class="col-md-2">Source:</dt><dd class="col-md-9"><a href="{{link}}.zip">{{source}}</a></dd>
        		</dl>
        {{/.}}
      </script>
    </div>

    <script>
      $(function () {
        setActiveMenu("navbar_models");
        buildModelsList();

        function buildModelsList() {
          $.ajax({
            url: "route/predict/model/idname",
            type: "GET",
            dataType: "json",
            success: function (data, status, xhr) {
              $("#total_model").html(data.length);
              var options = "";
              data.forEach(function (d) {
                options +=
                  '<option value="' + d.id + '">' + d.name + "</option>";
              });
              // console.log(options);
              $("#models_list")
                .append(options)
                .promise()
                .done(function () {
                  var $this = $(this);
                  showModelDetail($this.find("option:first").val());
                  $this.on("change", function (e) {
                    var modelId = $(this).val();
                    showModelDetail(modelId);
                  });
                  /*
 						$this.selectpicker({liveSearch: true,maxOptions: 1}); 
 						$this.on('changed.bs.select', function (e) { 
 							var modelId=$(this).val(); 
 							showModelDetail(modelId);  
 						});*/
                });
            },
            error: function (xhr, status, error) {
              errorHandler(xhr, status, error);
            },
          });
        }

        function showModelDetail(modelId) {
          $.ajax({
            url: "route/predict/model/byid/" + modelId,
            type: "GET",
            dataType: "json",
            success: function (data, status, xhr) {
              if (data.references) {
                var refArr = data.references.split(/\|/);
                data.references = refArr;
              }
              var infoHtml = Mustache.to_html(
                $("#model_detail_template").html(),
                data
              ); //cssjs.html
              $("#model_info").html(infoHtml);
            },
            error: function (xhr, status, error) {
              errorHandler(xhr, status, error);
            },
          });
        }
      });
    </script>
  </body>
</html>
